#CRDT 调研报告

##0.摘要

​	

## 1.What is CRDT

​	CRDT，全称无冲突复制数据类型(Conflict-free Replicated Data Type)，在具体阐述之前，先简要介绍一下分布式系统的CAP理论。

### 1.1 CAP Theory

​	强一致性(Consistency)： 即在分布式系统中的同一数据多副本情形下， 对千数据的更新操作体现出的效果与只有单份数据是一样的。

​	可用性(Availability)： 客户端在任何时刻对大规模数据系统的读／写操作都应该保证在限定延时内完成。

​	分区容忍性(Partition Tolerance)： 在大规模分布式数据系统中， 网络分区现象， 即分区间的机器无法进行网络通信的情况是必然会发生的， 所以系统应该能够在这种情况下仍然继续工作。

​	CAP 最初是由Eric Brewer于1999 年首先提出的， 他同时证明了：**对于一个大规模分布式数据系统来说， CAP 三要素不可兼得**， 同一个系统至多只能实现其中的两个， 而必须放宽第3 个要素来保证其他两个要素被满足。



###1.2 CRDT的提出

​	于2012年，CAP理论的创始者在*computer*杂志上刊载了一篇文章，指出了当时学界及业界对于CAP理论的误区：CAP理论并不是为了P（分区容忍性），要在A和C之间选择一个。事实上，分区很少出现，CAP在大多数时候允许完美的C和A。但当分区存在或可感知其影响的情况下，就要预备一种策略去探知分区并显式处理其影响。这样的策略应分为三个步骤：探知分区发生，进入显式的分区模式以限制某些操作，启动恢复过程以恢复数据一致性并补偿分区期间发生的错误。

​	CRDT应运而生，其最初提出的动机是因为最终一致性，即随时保持可用性，但是各个节点会存在不一致的时刻。论文 *Conflict-free replicated data types*提出了简单的、理论证明的方式来达到最终一致性。

​	CRDT 不提供「完美的一致性」，它提供了**「强最终一致性」(Strong Eventual Consistency)**，这代表进程A可能无法立即反映进程B上发生的状态变动，但是当A、B同步消息之后他们二者就可以恢复一致性，并且不需要解决潜在冲突（CRDT在数学上杜绝了冲突发生的可能性）。而「强最终一致性」是不与「可用性」和「分区容错性」冲突的，所以CRDT同时提供了这三者，达成了较好的CAP上的权衡。



###1.3 CRDT模型
